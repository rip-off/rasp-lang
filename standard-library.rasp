(defun random_shuffle (array)
  (var i (- (array_length array) 1))
  (while (> i 1)
    (var random_index (% (rand) i))
    (var temp (array_element array random_index))
    (set array (array_set_element array random_index (array_element array i)))
    (set array (array_set_element array i temp))
    (set i (- i 1)))
  array)

